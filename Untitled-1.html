<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Victoria Alejandra: Esperando Como una Roca</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Raleway:wght?100;400;700&display=swap" rel="stylesheet">
    <style>
        /* ESTILOS BASE Y FONDO M√ÅGICO */
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            /* Fondo que evoca firmeza y amor (tonos tierra y rosa) */
            background: linear-gradient(135deg, #fce4ec, #e0e0e0); 
            animation: background-pulse 15s infinite alternate; 
            font-family: 'Raleway', sans-serif;
            color: #333; 
            overflow: hidden; 
            position: relative;
        }

        @keyframes background-pulse {
            0% { background: linear-gradient(135deg, #fce4ec, #e0e0e0); }
            50% { background: linear-gradient(135deg, #cfd8dc, #ffccf0); }
            100% { background: linear-gradient(135deg, #fce4ec, #e0e0e0); }
        }

        /* CONTENEDOR PRINCIPAL DE LA CARTA */
        #letter-container {
            max-width: 750px;
            padding: 60px; 
            background-color: rgba(255, 255, 255, 0.98); 
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(100, 100, 100, 0.2); /* Sombra firme */
            position: relative;
            z-index: 10;
            opacity: 0; 
            transform: translateY(30px);
            animation: fade-in-up 1.5s forwards;
            animation-delay: 0.5s;
        }

        @keyframes fade-in-up {
            to { opacity: 1; transform: translateY(0); }
        }

        /* ESTILO DE L√çNEA SEPARADA */
        .line {
            display: block;
            margin-bottom: 30px; 
            font-size: 1.4rem;
            white-space: pre-wrap; 
            overflow: hidden;
            border-right: 0.15em solid #a8a8a8; 
            animation: blink-caret 0.75s step-end infinite;
            line-height: 1.6; 
            min-height: 1.4rem; 
        }
        
        .line strong { 
            color: #795548; /* Tono marr√≥n/roca */
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }

        .final-impact-line { 
            font-size: 2.5rem; 
            font-family: 'Playfair Display', serif;
            font-weight: 900;
            color: #5d4037; /* Marr√≥n oscuro para firmeza */
            text-shadow: 0 0 15px rgba(121, 85, 72, 0.7), 0 0 30px rgba(121, 85, 72, 0.4);
            margin-top: 40px;
            border-right: none !important; 
            animation: final-line-pulse 1s infinite alternate; 
        }
        
        @keyframes final-line-pulse {
            from { transform: scale(1.0); opacity: 1; }
            to { transform: scale(1.02); opacity: 0.95; }
        }
        
        .completed {
            border-right: none !important;
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #a8a8a8; }
        }

        /* ESTILO DEL BOT√ìN DE DEDICATORIA */
        #dedication-button {
            display: none; 
            margin-top: 40px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            text-decoration: none;
            color: #fff;
            background-color: #795548; /* Marr√≥n de la roca */
            border: 2px solid #5d4037; 
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            z-index: 20;
        }

        #dedication-button:hover {
            background-color: #5d4037;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }

        /* ESTILO DE LA FIRMA */
        #signature {
            margin-top: 50px;
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.8rem;
            text-align: right;
            color: #0d0d0d;
            opacity: 0;
            transform: translateY(20px);
        }

        /* --- PART√çCULAS DE EXPLOSI√ìN/LLUVIA (Corazones y Piedras) --- */
        .particle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }
        .particle {
            position: absolute;
            opacity: 0;
            font-size: 2rem; 
        }
    </style>
</head>
<body>
    
    <div id="letter-container"></div>
    
    <a id="dedication-button" 
       href="https://www.youtube.com/watch?v=C6uqTWHzHvo" 
       target="_blank">
       Te dedico esta üóø
    </a>
    
    <div id="signature"></div>
    <div class="particle-container" id="particle-container"></div>

    <script>
        // L√ìGICA DE PROGRAMACI√ìN CON JAVASCRIPT

        // 1. EL CONTENIDO DE LA CARTA (Tema: Estabilidad y Espera)
        // L√ìGICA DE PROGRAMACI√ìN CON JAVASCRIPT

// 1. EL CONTENIDO DE LA CARTA (Corregido y formateado como documento)
const letterContent = [
    "Mi firme <strong>Victoria Alejandra</strong>, la roca de mi coraz√≥n. üóø", 
    "",
    "Mi amor, ya que casi te vas a trabajar, quiero que sepas que te amo,",
    "y que estar√© para ti **siempre**. Suerte en tu noble labor. ‚ù§Ô∏è",
    "",
    "Tu existencia es el **cimiento inamovible** de mi vida. Eres la **paciencia** y la **fuerza** que el mundo necesita. üí™",
    "No importa qu√© tan lejos tengas que ir o cu√°ntas horas duren tus pasos; aqu√≠, en casa, **te esperar√© como una piedra** (*Like a Stone*), paciente y firme. üè°",
    "Este amor es nuestra verdad: una conexi√≥n que no se doblega ante la distancia o el cansancio. Un pacto **silencioso y eterno**. üíñ",
    "",
    "<strong>¬°Te amo, porque t√∫ eres la raz√≥n por la que mi alma sabe d√≥nde anclarse!</strong> ‚öì",
    "",
    "Con la devoci√≥n inquebrantable de mi alma,",
    "Tu admirador"
];
// ... (El resto del c√≥digo JavaScript se mantiene igual) ...
        
        // Elementos del DOM
        const letterContainer = document.getElementById('letter-container');
        const signatureElement = document.getElementById('signature');
        const particleContainer = document.getElementById('particle-container');
        const dedicationButton = document.getElementById('dedication-button');

        // Configuraci√≥n de la animaci√≥n
        const typingSpeed = 60; 
        const pauseBetweenLines = 1800; 
        let currentLineIndex = 0;

        // Emojis para la lluvia y explosiones (Piedra, anclas, corazones)
        const rainEmojis = ['üíñ', '‚ú®', 'üóø', '‚öì', 'üí™', 'üè°', '‚ù§Ô∏è'];
        const explosionEmojis = ['üí•', 'üíñ', 'üóø', '‚öì', 'üí™', '‚ù§Ô∏è', 'üî•']; 

        // --- FUNCIONES DE ANIMACI√ìN (Se mantienen las funciones de animaci√≥n) ---

        function typeWriter() {
            if (currentLineIndex < letterContent.length) {
                const lineText = letterContent[currentLineIndex];
                const newLine = document.createElement('span');
                newLine.classList.add('line');
                
                const finalLineText = "<strong>¬°Te Amo, porque t√∫ eres la raz√≥n por la que mi alma sabe d√≥nde anclarse!</strong> ‚öì";
                
                if (lineText === finalLineText) {
                    newLine.classList.add('final-impact-line');
                }
                
                letterContainer.appendChild(newLine);
                typeLineCharacters(newLine, lineText, 0);
            } else {
                dedicationButton.style.display = 'block'; 
                
                signatureElement.textContent = letterContent[letterContent.length - 1]; 
                const totalDuration = (currentLineIndex * pauseBetweenLines) + (currentLineIndex * 20 * typingSpeed);
                signatureElement.style.animationDelay = `${totalDuration / 1000}s`;
                signatureElement.style.opacity = 1; 
                
                startParticleRain(rainEmojis, 150, 5, 2000, 15000); 
            }
        }

        function typeLineCharacters(element, text, charIndex) {
            if (charIndex < text.length) {
                const char = text.charAt(charIndex);
                if (char === '<') { 
                    const endIndex = text.indexOf('>', charIndex);
                    if (endIndex !== -1) {
                        const htmlTag = text.substring(charIndex, endIndex + 1);
                        element.innerHTML += htmlTag;
                        charIndex = endIndex; 
                    }
                } else {
                    element.innerHTML += char;
                }
                setTimeout(() => typeLineCharacters(element, text, charIndex + 1), typingSpeed);
            } else {
                element.classList.add('completed');
                element.classList.remove('line');

                // Disparar eventos visuales en frases clave
                if (currentLineIndex === 4) { // Cimiento/Fuerza
                    createFloatingEmojis(['üóø', 'üí™', '‚ú®'], element);
                }
                if (currentLineIndex === 5) { // Esperar√©/Hogar
                    createFloatingEmojis(['üè°', '‚åõ', 'üóø'], element);
                }
                if (currentLineIndex === 8) { // Explosi√≥n final
                    triggerBigExplosion(element); 
                }

                currentLineIndex++;
                setTimeout(typeWriter, pauseBetweenLines);
            }
        }

        // Crea emojis flotantes cerca del texto
        function createFloatingEmojis(emojisArr, targetElement) {
            const rect = targetElement.getBoundingClientRect();
            emojisArr.forEach(emojiChar => {
                const emoji = document.createElement('div');
                emoji.classList.add('particle');
                emoji.textContent = emojiChar;
                emoji.style.left = `${rect.right + Math.random() * 30 - 15}px`; 
                emoji.style.top = `${rect.top + rect.height / 2 + Math.random() * 30 - 15}px`; 
                particleContainer.appendChild(emoji);

                const floatDuration = Math.random() * 2 + 1.5;
                const floatDistance = Math.random() * 50 + 50; 
                const floatAngle = Math.random() * 2 * Math.PI; 

                emoji.animate([
                    { transform: `translate(0, 0)`, opacity: 1, fontSize: '1.5rem' },
                    { transform: `translate(${Math.cos(floatAngle) * floatDistance}px, ${Math.sin(floatAngle) * floatDistance}px) scale(0.2)`, opacity: 0, fontSize: '2rem' }
                ], {
                    duration: floatDuration * 1000,
                    easing: 'ease-out',
                    fill: 'forwards'
                });

                setTimeout(() => emoji.remove(), floatDuration * 1000 + 100);
            });
        }

        // --- Explosi√≥n principal, centrada en la l√≠nea de impacto ---
        function triggerBigExplosion(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 80; i++) { 
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.textContent = explosionEmojis[Math.floor(Math.random() * explosionEmojis.length)];
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                particleContainer.appendChild(particle);

                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 300 + 100;
                const duration = Math.random() * 3 + 1.5;

                particle.animate([
                    { transform: `translate(0, 0) scale(1)`, opacity: 1 },
                    { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0.1)`, opacity: 0 }
                ], {
                    duration: duration * 1000,
                    easing: 'ease-out',
                    fill: 'forwards'
                });

                setTimeout(() => particle.remove(), duration * 1000 + 100);
            }
        }

        // Lluvia de part√≠culas gen√©rica (usada para la lluvia final)
        function startParticleRain(emojisArr, count, minSize, minDelay, maxDelay) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.textContent = emojisArr[Math.floor(Math.random() * emojisArr.length)];
                
                const size = Math.random() * 1.5 + minSize; 
                particle.style.fontSize = `${size}rem`;
                
                const startX = Math.random() * window.innerWidth;
                particle.style.left = `${startX}px`;
                
                const delay = Math.random() * (maxDelay - minDelay) + minDelay;

                 particle.animate([
                    { transform: `translateY(-50px) scale(0.8)`, opacity: 0.8 },
                    { transform: `translateY(${window.innerHeight + 50}px) scale(1.2)`, opacity: 0 }
                ], {
                    duration: delay,
                    easing: 'linear',
                    fill: 'forwards'
                });

                particleContainer.appendChild(particle);
                setTimeout(() => particle.remove(), delay + 1000); 
            }
        }

        // --- INICIO ---
        window.onload = () => {
            typeWriter();
            startParticleRain(['üíñ', '‚ú®', 'üåü', 'üå∑'], 30, 0.8, 8000, 20000); 
        };
    </script>
</body>
</html>
